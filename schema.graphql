enum LockType {
  DEPOSIT_FOR,
  CREATE_LOCK,
  INCREASE_LOCK_AMOUNT,
  INCREASE_UNLOCK_TIME,
  WITHDRAW
}

type Platform @entity {
  id: ID!
  totalVeCrv: BigInt!
  totalCrvLocked: BigInt!
  crvSupply: BigInt!
}

type HistoricalPowerSnapshots @entity {
  id: ID!
  block: BigInt!
  timestamp: BigInt!
  # total supply of veCRV
  totalVeCrv: BigInt!
  # total amount of CRV locked in contract
  totalCrvLocked: BigInt!
  # total amount of CRV minted
  crvSupply: BigInt!
}

type User @entity {
  id: ID!
  balance: UserBalance! @derivedFrom(field: "user")
  locks: [Lock!]! @derivedFrom(field: "user")
}

type UserBalance @entity {
  id: ID!
  startTx: Bytes!
  user: User!
  crvLocked: BigInt!
  lockStart: BigInt!
  unlockTime: BigInt!
}

type Lock @entity {
  id: ID!
  user: User!
  tx: Bytes!
  value: BigInt!
  lockStart: BigInt!
  unlockTime: BigInt!
  previousUnlockTime: BigInt!
  totalLocked: BigInt!
  previousTotalLocked: BigInt!
  type: LockType!
  timestamp: BigInt!
}